<!DOCTYPE html>
<html>
	<head>
	<meta charset="UTF-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script>

  var num_es_clicked = 0;
  var num_non_es_clicked = 0;
  var red_rgb_val = "rgb(255, 0, 0)";
  var total_num_es = 0;
  
  // This function prevents someone from being able to press ctrl + F
  $(window).keydown(function(e){
    if ((e.ctrlKey || e.metaKey) && e.keyCode === 70) {
      e.preventDefault();
    }
  });

  $( document ).ready(function(){
      
     /* This function takes a character and makes it into a dynamic clickable
      * character that behaves according to the e-cross specs.
      */
      function makeAndAppendEcrossLetter(letter){
          var span=document.createElement("SPAN");
          span.style.fontSize="xx-large";
          span.style.cursor="pointer";
          span.className = span.className + "clickable-letter";

          var t=document.createTextNode(letter);
          span.appendChild(t);

          span.onclick = 
               function(){
                 if(span.style.color=="red"){
                   span.style.color = "black";
                   span.style.textDecoration="none";
                 }
                 else{
                  span.style.color="red";
                  span.style.textDecoration="line-through";
                 }
               };
          span.onselect="";
          var oldParagraph = document.getElementById("text-area");
          oldParagraph.appendChild(span);
      };
    
      /* These two lines grab the text from the text area and then clear the text area.
       * We could have just made it a JS string variable, but to make it easier for
       * the end user they can just copy and paste into the text area.
       */
      var my_string = $("#text-area").html();
      $("#text-area").empty();

      /* This function uses the string attained in the line above and feeds it
       * to makeAndAppendEcrossLetter in order to make a valid ecross letter
       * and append it to the text-area. 
       */
      var current_char;
      for (var i=0;i<my_string.length;i++){ 
        current_char = my_string.charAt(i);
        makeAndAppendEcrossLetter(current_char);
        if(current_char == "e"){
          total_num_es = total_num_es + 1;
        }
      }


      /* This function handles the logic to keep track of the current count
       * of e's that have been clicked and non-es that have been clicked.
       */
      $( ".clickable-letter" ).click(function() {
         var element_color = $( this ).css("color"); 
         var letter_val = $( this ).html().toLowerCase(); 
         var is_letter = false; 

         if (/^[a-z]+$/.test(letter_val)){
            is_letter = true;
         }
        
         if (is_letter){
            if (letter_val == "e"){
              if (element_color == red_rgb_val){
                // inc es
                num_es_clicked = num_es_clicked + 1;

              } else {
                // dec es
                num_es_clicked = num_es_clicked - 1;
              }
            } else {

              if (element_color == red_rgb_val){
                // inc non es
                num_non_es_clicked = num_non_es_clicked + 1;
              } else {
                //dec non es
                num_non_es_clicked = num_non_es_clicked - 1;
              }
            }
          }
      });

    }); // end doc ready
		</script>
		<style>
		
      table{
        border:3px solid;
        color: rgb(86,160,211);
      }
      
      #text-area{
        color:black;
        font-family:"Arial", Arial, Sans-serif;
      }
    
      .noselect {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
         user-select: none;
      }

		</style>
		<title>E-Cross Task</title>
	</head>

	<body>

		<table width="80%">
		<tr>
		<td>
		<p id="text-area" class="noselect">
			Lorem ipsum dolor sit amet,  consectetur adipisicing elit,  sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex 
      ea commodo consequat. Duis aute irure dolor in reprehenderit in  
      voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
      sint occaecat cupidatat non proident, sunt in culpa qui  officia
      deserunt mollit anim id est laborum.
		</p>
    </td>
		</tr>
		</table>


		<script>
		</script>


	</body>
</html>
